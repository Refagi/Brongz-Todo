<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Brongz-Todo</title>
    <!-- main css -->
    <link rel="stylesheet" href="css/index.css" />

    <!-- font css -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/fontawesome-free-6.7.2-web/css/all.css" />

    <!-- favicon -->
    <link rel="icon" href="favicon/favicon.jpeg" type="image/x-icon" />
  </head>
  <body class="">
    <div class="container-row">
      <div id="left"></div>
      <div id="middle"></div>
      <div id="right"></div>
    </div>
    <div id="addTask"></div>
    <div id="editTask"></div>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Fungsi untuk memuat file HTML ke dalam elemen tertentu
        async function loadHTML(targetId, url) {
          const target = document.getElementById(targetId);
          const response = await fetch(url);
          const content = await response.text();
          target.innerHTML = content;
        }

        async function init() {
          await loadHTML("left", "left.html");
          await loadHTML("middle", "mid.html");
          await loadHTML("right", "right.html");
          await loadHTML("addTask", "addTask.html");
          await loadHTML("editTask", "editTask.html");
          getCurrentDate();
          darkMode();
          await logout();
          await popUpAddTask();
          await editTask();
          await addTask();
          await deleteTask();
          await getTask();
          await deleteAllTask();
          await searchTask();

          setTimeout(() => {
            const getButtonAllTask = document.getElementById("allTask");
            const getButtonImportantTask = document.getElementById("importanTask");
            const getButtonCompletedTask = document.getElementById("completeTask");
            const getButtonUncompletedTask = document.getElementById("uncompleteTask");

            if (getButtonAllTask && getButtonImportantTask && getButtonCompletedTask && getButtonUncompletedTask) {
              getButtonAllTask.addEventListener("click", () => fetchTasks("all"));
              getButtonImportantTask.addEventListener("click", () => fetchTasks("important"));
              getButtonCompletedTask.addEventListener("click", () =>fetchTasks("completed"));
              getButtonUncompletedTask.addEventListener("click", () =>fetchTasks("uncompleted"));
            } else {
              console.error("Elemen tombol tugas tidak ditemukan di DOM.");
            }
          }, 500);
        }

        init();
      });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="js/index.js"></script>
    <script src="js/searchTask.js"></script>
    <script src="js/addTask.js"></script>
    <script src="js/editTask.js"></script>
    <script src="js/deleteTask.js"></script>
    <script src="js/deleteAllTask.js"></script>
    <script src="js/logout.js"></script>
    <script src="js/getTask.js"></script>
    <script src="js/allTask.js"></script>
  </body>
</html>
